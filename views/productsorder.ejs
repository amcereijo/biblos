<!-- Default home page -->
<link type="text/css" href='http://sailsjs.org/styles/fonts.css' rel='stylesheet'/>
<style>
.table tbody>tr:nth-child(odd){ 
    background: white;
  }
  /*  Define the background color for all the EVEN background rows  */
  .table tbody>tr:nth-child(even){
    background: #ddd;
  }
</style>
<script type="text/javascript">
</script>

<div class="container-fluid">
  
<div id="main" class="container panel panel-default"  ng-app="biblos" ng-controller="MainController">

  <div id="head" role="head">
    <h3>Realizar pedido</h3>
  </div>

  <div class="panel panel-default">
    
    <div class="panel-heading" ng-init="init(<%=dataUpdate%>)">
        <form class="form-inline" name="formAddProduct">
            <div class="form-group">
                <label for="selectedProduct">Producto:</label>
                <select name="selectAddProduct" id="selectAddProduct" class="form-control" id="selectedProduct" ng-model="selectedProduct" required>
                    <option ng-repeat="p in products" value="{{$index}}">
                      {{p.name}} - {{p.price}}€
                    </option>
                </select>
                <button type="button" class="btn btn-primary" ng-click="showHideProducts(!showAllProducts)" aria-label="Left Align">
                    {{!showAllProducts?'Ver todos':'Ocultar'}}
                </button>
                <label for="productAmount">Cantidad</label>
                <select id="productAmount" ng-model="productAmount" class="form-control" ng-options="n for n in [1,2,3,4,5,6,7,8,9,10]"  required></select>
                <button type="button" class="btn btn-success" ng-disabled="formAddProduct.$invalid" ng-click="addProduct()">Añadir</button>
            </div>
            
        </form>
    </div>  
    <div class="panel-body">
      <!-- Table -->
      <table class="table" ng-show="showAllProducts">
        <thead>
          <tr>
            <th>#</th>
            <th>Nombre</th>
            <th>Observaciones</th>
            <th>Precio €</th>
            <th></th>
          </tr>
        </thead>
        
        <tbody>
          <tr ng-repeat="p in products" ng-click="selectProduct($index)">
            <th scope="row">{{p.id}}</th> <!-- remove show value -->
            <td>{{p.name}}</td>
            <td>{{p.observations}}</td>
            <td>{{p.price}}€</td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>


  <div class="panel-heading" >
    Pedido    
  </div>  
  <div class="panel-body">
    <!-- Table -->
    <table class="table" id="orderTable">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Precio €</th>
          <th>Cantidad</th>
          <th>Total €</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="o in orders" ng-class="">
          <td>{{o.product.name}}</td>
          <td>{{o.product.price}}€</td>
          <td>{{o.amount}}</td>
          <td>{{o.product.price * o.amount}}€</td>
          <td><button type="button" class="btn btn-danger" ng-click="removeProduct(o)">-</button></td>
        </tr>
      </tbody>
    </table>
    <p class="text-right">
      <button type="button" class="btn btn-success" ng-disabled="orderTableDisabled" ng-click="makeOrder()">Realizar Pedido</button>
    </p>
    
  </div>

</div>



</div>
